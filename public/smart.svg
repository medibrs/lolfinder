<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600" width="100%" height="100%">
  <defs>
    <!-- Base shadow for isometric objects -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="15" stdDeviation="10" flood-color="#a0b8b0" flood-opacity="0.3" />
    </filter>

    <!-- Base components for Isometric phones -->
    <g id="phone-body">
      <rect x="-65" y="-130" width="130" height="260" rx="24" transform="scale(1, 0.5) rotate(45)" />
    </g>
    <g id="phone-screen">
      <rect x="-55" y="-120" width="110" height="240" rx="16" transform="scale(1, 0.5) rotate(45)" />
    </g>

    <!-- Star Graphic -->
    <path id="star" d="M0 -12 C 2 -3 2 -3 12 0 C 2 3 2 3 0 12 C -2 3 -2 3 -12 0 C -2 -3 -2 -3 0 -12 Z" fill="#F39C12" />
  </defs>

  <!-- Background -->
  <rect width="100%" height="100%" fill="#EBF4F1" />

  <!-- Floor Shadows -->
  <rect x="-65" y="-130" width="130" height="260" rx="24" transform="translate(250, 480) scale(1, 0.5) rotate(45)" fill="#d6e8e0" filter="url(#shadow)" />
  <rect x="-65" y="-130" width="130" height="260" rx="24" transform="translate(550, 240) scale(1, 0.5) rotate(45)" fill="#d6e8e0" filter="url(#shadow)" />

  <!-- ================= PHONE 2 (DESTINATION / WALLET) ================= -->
  <g id="phone2">
    <!-- 3D Extrusion Layers -->
    <use href="#phone-body" x="550" y="216" fill="#4d9e7a"/>
    <use href="#phone-body" x="550" y="214" fill="#54ad86"/>
    <use href="#phone-body" x="550" y="212" fill="#5cba90"/>
    <use href="#phone-body" x="550" y="210" fill="#64c499"/>
    <use href="#phone-body" x="550" y="208" fill="#6dcfa3"/>
    <use href="#phone-body" x="550" y="206" fill="#76daac"/>
    <use href="#phone-body" x="550" y="204" fill="#81e3b4"/>
    <use href="#phone-body" x="550" y="202" fill="#8cecbd"/>
    <use href="#phone-body" x="550" y="200" fill="#A4E5C4"/>
    
    <!-- Screen -->
    <use href="#phone-screen" x="550" y="200" fill="#F2FBF6"/>
    
    <!-- Camera Hole -->
    <g transform="translate(550, 200) scale(1, 0.5) rotate(45)">
      <circle cx="0" cy="-100" r="4" fill="#A4E5C4" />
      
      <!-- Wallet UI -->
      <!-- Header -->
      <rect x="-40" y="-80" width="80" height="20" rx="6" fill="#D3EFE1"/>
      <rect x="-40" y="-50" width="45" height="10" rx="5" fill="#D3EFE1"/>
      <rect x="10" y="-50" width="30" height="10" rx="5" fill="#D3EFE1"/>

      <!-- Wallet Back & Inside -->
      <path d="M-45 10 L45 10 L45 80 C45 85.5 40.5 90 35 90 L-35 90 C-40.5 90 -45 85.5 -45 80 Z" fill="#91D5B6"/>
      <!-- Wallet Slot Depth -->
      <path d="M-45 30 L45 30 L45 35 L-45 35 Z" fill="#75C2A0"/>

      <!-- Digital Cards Overlapping -->
      <g>
        <!-- Card 1 (Blue) -->
        <rect x="-35" y="-5" width="70" height="42" rx="6" fill="#A1C9E4"/>
        <rect x="-25" y="5" width="12" height="8" rx="2" fill="#EAD598"/>
        <circle cx="20" cy="10" r="5" fill="#fff" opacity="0.5"/>
        <circle cx="26" cy="10" r="5" fill="#fff" opacity="0.5"/>
        
        <!-- Card 2 (Peach) -->
        <rect x="-40" y="15" width="80" height="42" rx="6" fill="#FFD1A9"/>
        <rect x="-30" y="25" width="12" height="8" rx="2" fill="#EAD598"/>
        <circle cx="25" cy="30" r="5" fill="#fff" opacity="0.5"/>
        <circle cx="31" cy="30" r="5" fill="#fff" opacity="0.5"/>
      </g>
    </g>
  </g>

  <!-- ================= DASHED PATH ================= -->
  <!-- Originates at P1 Send Button (236, 437) and ends inside Wallet Slot (518, 216) -->
  <path d="M 236 437 Q 380 -30 518 216" fill="none" stroke="#70c99f" stroke-width="4" stroke-dasharray="12 12" stroke-linecap="round">
    <animate attributeName="stroke-dashoffset" from="24" to="0" dur="0.8s" repeatCount="indefinite" />
  </path>

  <!-- ================= PHONE 1 (SOURCE) ================= -->
  <g id="phone1">
    <!-- 3D Extrusion Layers -->
    <use href="#phone-body" x="250" y="446" fill="#6a95b5"/>
    <use href="#phone-body" x="250" y="444" fill="#719cb8"/>
    <use href="#phone-body" x="250" y="442" fill="#78a4bd"/>
    <use href="#phone-body" x="250" y="440" fill="#7faec2"/>
    <use href="#phone-body" x="250" y="438" fill="#88b7c7"/>
    <use href="#phone-body" x="250" y="436" fill="#91c1cc"/>
    <use href="#phone-body" x="250" y="434" fill="#9bcad1"/>
    <use href="#phone-body" x="250" y="432" fill="#a4d4d6"/>
    <use href="#phone-body" x="250" y="430" fill="#A1C9E4"/>
    
    <!-- Screen -->
    <use href="#phone-screen" x="250" y="430" fill="#F4F9FD"/>
    
    <!-- Camera Hole -->
    <g transform="translate(250, 430) scale(1, 0.5) rotate(45)">
      <circle cx="0" cy="-100" r="4" fill="#A1C9E4" />
      
      <!-- User Profile / Header UI -->
      <circle cx="0" cy="-70" r="16" fill="#D9E8F5"/>
      <rect x="-40" y="-40" width="80" height="12" rx="6" fill="#D9E8F5"/>
      <rect x="-25" y="-20" width="50" height="10" rx="5" fill="#D9E8F5"/>

      <!-- App Grid -->
      <rect x="-35" y="0" width="20" height="20" rx="6" fill="#D9E8F5"/>
      <rect x="-10" y="0" width="20" height="20" rx="6" fill="#D9E8F5"/>
      <rect x="15" y="0" width="20" height="20" rx="6" fill="#D9E8F5"/>
      
      <rect x="-35" y="30" width="20" height="20" rx="6" fill="#D9E8F5"/>
      <rect x="-10" y="30" width="20" height="20" rx="6" fill="#D9E8F5"/>
      <rect x="15" y="30" width="20" height="20" rx="6" fill="#D9E8F5"/>

      <!-- Send Action Button (Coin Source) -->
      <!-- Moved slightly down to leave room for the grid -->
      <g transform="translate(0, 75)">
        <circle cx="0" cy="0" r="28" fill="#A1C9E4"/>
        <circle cx="0" cy="0" r="22" fill="#8cbde0"/>
        <!-- Arrow pointing towards Phone 2 (Local UP means Up-Right on canvas) -->
        <path d="M-8 4 L0 -6 L8 4" fill="none" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
        <line x1="0" y1="10" x2="0" y2="-5" stroke="#fff" stroke-width="3" stroke-linecap="round"/>
      </g>
    </g>
  </g>

  <!-- ================= COIN ANIMATION ================= -->
  <!-- We redefine the path here internally so the animateMotion can track it -->
  <!-- Note: The start position corresponds to the send button at (236, 437) -->
  <g>
    <animateMotion 
      path="M 236 437 Q 380 -30 518 216" 
      dur="2.5s" 
      repeatCount="indefinite" 
      calcMode="linear" 
      keyPoints="0; 1; 1" 
      keyTimes="0; 0.6; 1" />
      
    <g>
      <!-- Opacity: Fades in quickly, stays visible, fades out as it drops into the wallet -->
      <animate attributeName="opacity" values="0; 1; 1; 0; 0" keyTimes="0; 0.05; 0.55; 0.6; 1" dur="2.5s" repeatCount="indefinite" />
      
      <!-- Pop Scale: Grows as it pops out, shrinks slightly as it enters wallet -->
      <animateTransform attributeName="transform" type="scale" values="0.2 0.2; 1 1; 1 1; 0.6 0.6; 0.6 0.6" keyTimes="0; 0.1; 0.5; 0.6; 1" dur="2.5s" repeatCount="indefinite" />
      
      <g>
        <!-- 3D Flip Effect: Scales Y-axis up and down to simulate a flipping coin -->
        <animateTransform attributeName="transform" type="scale" values="1,1; 1,0.01; 1,-1; 1,0.01; 1,1" dur="0.5s" repeatCount="indefinite" additive="sum"/>
        
        <!-- Coin Visuals -->
        <circle cx="0" cy="0" r="24" fill="#FFD700" stroke="#F39C12" stroke-width="3"/>
        <circle cx="0" cy="0" r="18" fill="none" stroke="#F39C12" stroke-width="2"/>
        
        <!-- Coin Symbol -->
        <text x="0" y="8" font-family="sans-serif" font-size="22" font-weight="bold" fill="#F39C12" text-anchor="middle">$</text>
      </g>
    </g>
  </g>

  <!-- ================= PHONE 2 (WALLET FRONT FLAP) ================= -->
  <!-- Drawn after the coin so the coin cleanly slides behind it -->
  <g transform="translate(550, 200) scale(1, 0.5) rotate(45)">
    <!-- Wallet Front Flap -->
    <path d="M-45 30 L45 30 L45 80 C45 85.5 40.5 90 35 90 L-35 90 C-40.5 90 -45 85.5 -45 80 Z" fill="#61C197"/>
    
    <!-- Wallet Buckle -->
    <rect x="-12" y="30" width="24" height="10" rx="4" fill="#A4E5C4"/>
    <rect x="-8" y="34" width="16" height="4" rx="2" fill="#F2FBF6"/>
  </g>

  <!-- ================= DECORATIVE STARS ================= -->
  <g transform="translate(380, 160)">
    <animateTransform attributeName="transform" type="translate" values="380,160; 380,150; 380,160" dur="4s" repeatCount="indefinite" />
    <use href="#star" opacity="0.8">
      <animate attributeName="opacity" values="0.3; 0.9; 0.3" dur="2s" repeatCount="indefinite" />
      <animateTransform attributeName="transform" type="scale" values="0.8; 1.2; 0.8" dur="2s" repeatCount="indefinite" additive="sum"/>
    </use>
  </g>

  <g transform="translate(480, 360)">
    <animateTransform attributeName="transform" type="translate" values="480,360; 480,345; 480,360" dur="3s" repeatCount="indefinite" />
    <use href="#star" opacity="0.6">
      <animate attributeName="opacity" values="0.2; 0.7; 0.2" dur="1.5s" repeatCount="indefinite" />
      <animateTransform attributeName="transform" type="scale" values="0.6; 1.0; 0.6" dur="1.5s" repeatCount="indefinite" additive="sum"/>
    </use>
  </g>

  <g transform="translate(240, 250)">
    <animateTransform attributeName="transform" type="translate" values="240,250; 240,240; 240,250" dur="5s" repeatCount="indefinite" />
    <use href="#star" opacity="0.5">
      <animate attributeName="opacity" values="0.2; 0.6; 0.2" dur="2.5s" repeatCount="indefinite" />
      <animateTransform attributeName="transform" type="scale" values="0.5; 0.9; 0.5" dur="2.5s" repeatCount="indefinite" additive="sum"/>
    </use>
  </g>
</svg>
